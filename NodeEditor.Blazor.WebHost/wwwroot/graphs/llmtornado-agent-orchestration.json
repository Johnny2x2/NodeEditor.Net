{
  "version": 1,
  "nodes": [
    {
      "id": "start",
      "typeId": null,
      "name": "Start",
      "callable": true,
      "execInit": true,
      "x": 40,
      "y": 300,
      "width": 180,
      "height": 60,
      "inputs": [],
      "outputs": [
        {
          "name": "Exit",
          "typeName": "NodeEditor.Blazor.Services.Execution.ExecutionPath",
          "isInput": false,
          "isExecution": true,
          "value": null
        }
      ]
    },
    {
      "id": "api",
      "typeId": null,
      "name": "Create Tornado API",
      "callable": false,
      "execInit": false,
      "x": 40,
      "y": 20,
      "width": 220,
      "height": 60,
      "inputs": [
        {
          "name": "ApiKey",
          "typeName": "System.String",
          "isInput": true,
          "isExecution": false,
          "value": { "typeName": "System.String", "json": "YOUR_API_KEY" }
        },
        {
          "name": "BaseUrl",
          "typeName": "System.String",
          "isInput": true,
          "isExecution": false,
          "value": { "typeName": "System.String", "json": "" }
        }
      ],
      "outputs": [
        {
          "name": "Client",
          "typeName": "LlmTornado.TornadoApi",
          "isInput": false,
          "isExecution": false,
          "value": null
        }
      ]
    },
    {
      "id": "model",
      "typeId": null,
      "name": "Create Chat Model",
      "callable": false,
      "execInit": false,
      "x": 280,
      "y": 20,
      "width": 220,
      "height": 60,
      "inputs": [
        {
          "name": "ModelName",
          "typeName": "System.String",
          "isInput": true,
          "isExecution": false,
          "value": { "typeName": "System.String", "json": "gpt-4o-mini" }
        }
      ],
      "outputs": [
        {
          "name": "Model",
          "typeName": "LlmTornado.Chat.Models.ChatModel",
          "isInput": false,
          "isExecution": false,
          "value": null
        }
      ]
    },
    {
      "id": "agent",
      "typeId": null,
      "name": "Create Agent",
      "callable": false,
      "execInit": false,
      "x": 520,
      "y": 20,
      "width": 240,
      "height": 80,
      "inputs": [
        { "name": "Client", "typeName": "LlmTornado.TornadoApi", "isInput": true, "isExecution": false, "value": null },
        { "name": "Model", "typeName": "LlmTornado.Chat.Models.ChatModel", "isInput": true, "isExecution": false, "value": null },
        { "name": "Name", "typeName": "System.String", "isInput": true, "isExecution": false, "value": { "typeName": "System.String", "json": "Demo Agent" } },
        { "name": "Instructions", "typeName": "System.String", "isInput": true, "isExecution": false, "value": { "typeName": "System.String", "json": "You are a helpful assistant." } },
        { "name": "Streaming", "typeName": "System.Boolean", "isInput": true, "isExecution": false, "value": { "typeName": "System.Boolean", "json": false } }
      ],
      "outputs": [
        { "name": "Agent", "typeName": "LlmTornado.Agents.TornadoAgent", "isInput": false, "isExecution": false, "value": null }
      ]
    },
    {
      "id": "mcp-fetch",
      "typeId": null,
      "name": "MCP Toolkit (Fetch)",
      "callable": false,
      "execInit": false,
      "x": 40,
      "y": 120,
      "width": 220,
      "height": 60,
      "inputs": [],
      "outputs": [
        { "name": "Server", "typeName": "LlmTornado.Mcp.MCPServer", "isInput": false, "isExecution": false, "value": null }
      ]
    },
    {
      "id": "mcp-init",
      "typeId": null,
      "name": "MCP Initialize",
      "callable": false,
      "execInit": false,
      "x": 280,
      "y": 120,
      "width": 220,
      "height": 60,
      "inputs": [
        { "name": "Server", "typeName": "LlmTornado.Mcp.MCPServer", "isInput": true, "isExecution": false, "value": null }
      ],
      "outputs": [
        { "name": "ToolsTask", "typeName": "System.Threading.Tasks.Task`1", "isInput": false, "isExecution": false, "value": null }
      ]
    },
    {
      "id": "await-tools",
      "typeId": null,
      "name": "Await Tools",
      "callable": false,
      "execInit": false,
      "x": 520,
      "y": 120,
      "width": 200,
      "height": 60,
      "inputs": [
        { "name": "ToolsTask", "typeName": "System.Threading.Tasks.Task`1", "isInput": true, "isExecution": false, "value": null }
      ],
      "outputs": [
        { "name": "Tools", "typeName": "System.Collections.Generic.List`1", "isInput": false, "isExecution": false, "value": null }
      ]
    },
    {
      "id": "add-tools",
      "typeId": null,
      "name": "Add Tools",
      "callable": false,
      "execInit": false,
      "x": 740,
      "y": 120,
      "width": 200,
      "height": 60,
      "inputs": [
        { "name": "Agent", "typeName": "LlmTornado.Agents.TornadoAgent", "isInput": true, "isExecution": false, "value": null },
        { "name": "Tools", "typeName": "System.Collections.Generic.List`1", "isInput": true, "isExecution": false, "value": null }
      ],
      "outputs": [
        { "name": "Updated", "typeName": "LlmTornado.Agents.TornadoAgent", "isInput": false, "isExecution": false, "value": null }
      ]
    },
    {
      "id": "orchestration",
      "typeId": null,
      "name": "Create Orchestration Runtime",
      "callable": false,
      "execInit": false,
      "x": 40,
      "y": 220,
      "width": 240,
      "height": 60,
      "inputs": [
        { "name": "MessageHistoryFile", "typeName": "System.String", "isInput": true, "isExecution": false, "value": { "typeName": "System.String", "json": "" } }
      ],
      "outputs": [
        { "name": "Runtime", "typeName": "LlmTornado.Agents.ChatRuntime.RuntimeConfigurations.OrchestrationRuntimeConfiguration", "isInput": false, "isExecution": false, "value": null }
      ]
    },
    {
      "id": "runnable-a",
      "typeId": null,
      "name": "Create Agent Runnable",
      "callable": false,
      "execInit": false,
      "x": 320,
      "y": 220,
      "width": 240,
      "height": 80,
      "inputs": [
        { "name": "Orchestration", "typeName": "LlmTornado.Agents.ChatRuntime.RuntimeConfigurations.OrchestrationRuntimeConfiguration", "isInput": true, "isExecution": false, "value": null },
        { "name": "Agent", "typeName": "LlmTornado.Agents.TornadoAgent", "isInput": true, "isExecution": false, "value": null },
        { "name": "Name", "typeName": "System.String", "isInput": true, "isExecution": false, "value": { "typeName": "System.String", "json": "Agent Step A" } },
        { "name": "AllowDeadEnd", "typeName": "System.Boolean", "isInput": true, "isExecution": false, "value": { "typeName": "System.Boolean", "json": false } }
      ],
      "outputs": [
        { "name": "Runnable", "typeName": "NodeEditor.Plugins.LlmTornado.AgentChatRunnable", "isInput": false, "isExecution": false, "value": null }
      ]
    },
    {
      "id": "runnable-b",
      "typeId": null,
      "name": "Create Agent Runnable",
      "callable": false,
      "execInit": false,
      "x": 600,
      "y": 220,
      "width": 240,
      "height": 80,
      "inputs": [
        { "name": "Orchestration", "typeName": "LlmTornado.Agents.ChatRuntime.RuntimeConfigurations.OrchestrationRuntimeConfiguration", "isInput": true, "isExecution": false, "value": null },
        { "name": "Agent", "typeName": "LlmTornado.Agents.TornadoAgent", "isInput": true, "isExecution": false, "value": null },
        { "name": "Name", "typeName": "System.String", "isInput": true, "isExecution": false, "value": { "typeName": "System.String", "json": "Agent Step B" } },
        { "name": "AllowDeadEnd", "typeName": "System.Boolean", "isInput": true, "isExecution": false, "value": { "typeName": "System.Boolean", "json": true } }
      ],
      "outputs": [
        { "name": "Runnable", "typeName": "NodeEditor.Plugins.LlmTornado.AgentChatRunnable", "isInput": false, "isExecution": false, "value": null }
      ]
    },
    {
      "id": "advancer",
      "typeId": null,
      "name": "Add Advancer",
      "callable": false,
      "execInit": false,
      "x": 880,
      "y": 220,
      "width": 200,
      "height": 60,
      "inputs": [
        { "name": "From", "typeName": "LlmTornado.Agents.ChatRuntime.Orchestration.OrchestrationRunnableBase", "isInput": true, "isExecution": false, "value": null },
        { "name": "To", "typeName": "LlmTornado.Agents.ChatRuntime.Orchestration.OrchestrationRunnableBase", "isInput": true, "isExecution": false, "value": null },
        { "name": "Condition", "typeName": "System.Boolean", "isInput": true, "isExecution": false, "value": { "typeName": "System.Boolean", "json": true } }
      ],
      "outputs": [
        { "name": "Updated", "typeName": "LlmTornado.Agents.ChatRuntime.Orchestration.OrchestrationRunnableBase", "isInput": false, "isExecution": false, "value": null }
      ]
    },
    {
      "id": "set-entry",
      "typeId": null,
      "name": "Set Entry Runnable",
      "callable": false,
      "execInit": false,
      "x": 320,
      "y": 320,
      "width": 220,
      "height": 60,
      "inputs": [
        { "name": "Orchestration", "typeName": "LlmTornado.Agents.ChatRuntime.RuntimeConfigurations.OrchestrationRuntimeConfiguration", "isInput": true, "isExecution": false, "value": null },
        { "name": "Runnable", "typeName": "LlmTornado.Agents.ChatRuntime.Orchestration.OrchestrationRunnableBase", "isInput": true, "isExecution": false, "value": null }
      ],
      "outputs": [
        { "name": "Updated", "typeName": "LlmTornado.Agents.ChatRuntime.RuntimeConfigurations.OrchestrationRuntimeConfiguration", "isInput": false, "isExecution": false, "value": null }
      ]
    },
    {
      "id": "set-result",
      "typeId": null,
      "name": "Set Result Runnable",
      "callable": false,
      "execInit": false,
      "x": 600,
      "y": 320,
      "width": 220,
      "height": 60,
      "inputs": [
        { "name": "Orchestration", "typeName": "LlmTornado.Agents.ChatRuntime.RuntimeConfigurations.OrchestrationRuntimeConfiguration", "isInput": true, "isExecution": false, "value": null },
        { "name": "Runnable", "typeName": "LlmTornado.Agents.ChatRuntime.Orchestration.OrchestrationRunnableBase", "isInput": true, "isExecution": false, "value": null }
      ],
      "outputs": [
        { "name": "Updated", "typeName": "LlmTornado.Agents.ChatRuntime.RuntimeConfigurations.OrchestrationRuntimeConfiguration", "isInput": false, "isExecution": false, "value": null }
      ]
    },
    {
      "id": "user-message",
      "typeId": null,
      "name": "Create User Message",
      "callable": false,
      "execInit": false,
      "x": 40,
      "y": 420,
      "width": 240,
      "height": 60,
      "inputs": [
        { "name": "Text", "typeName": "System.String", "isInput": true, "isExecution": false, "value": { "typeName": "System.String", "json": "Hello from orchestration" } }
      ],
      "outputs": [
        { "name": "Message", "typeName": "LlmTornado.Chat.ChatMessage", "isInput": false, "isExecution": false, "value": null }
      ]
    },
    {
      "id": "invoke",
      "typeId": null,
      "name": "Invoke Orchestration",
      "callable": true,
      "execInit": false,
      "x": 320,
      "y": 420,
      "width": 240,
      "height": 80,
      "inputs": [
        { "name": "Enter", "typeName": "NodeEditor.Blazor.Services.Execution.ExecutionPath", "isInput": true, "isExecution": true, "value": null },
        { "name": "Orchestration", "typeName": "LlmTornado.Agents.ChatRuntime.RuntimeConfigurations.OrchestrationRuntimeConfiguration", "isInput": true, "isExecution": false, "value": null },
        { "name": "Input", "typeName": "LlmTornado.Chat.ChatMessage", "isInput": true, "isExecution": false, "value": null }
      ],
      "outputs": [
        { "name": "ResultTask", "typeName": "System.Threading.Tasks.Task`1", "isInput": false, "isExecution": false, "value": null },
        { "name": "Exit", "typeName": "NodeEditor.Blazor.Services.Execution.ExecutionPath", "isInput": false, "isExecution": true, "value": null }
      ]
    },
    {
      "id": "await-message",
      "typeId": null,
      "name": "Await Chat Message",
      "callable": false,
      "execInit": false,
      "x": 600,
      "y": 420,
      "width": 220,
      "height": 60,
      "inputs": [
        { "name": "MessageTask", "typeName": "System.Threading.Tasks.Task`1", "isInput": true, "isExecution": false, "value": null }
      ],
      "outputs": [
        { "name": "Message", "typeName": "LlmTornado.Chat.ChatMessage", "isInput": false, "isExecution": false, "value": null }
      ]
    },
    {
      "id": "message-to-text",
      "typeId": null,
      "name": "Message To Text",
      "callable": false,
      "execInit": false,
      "x": 860,
      "y": 420,
      "width": 200,
      "height": 60,
      "inputs": [
        { "name": "Message", "typeName": "LlmTornado.Chat.ChatMessage", "isInput": true, "isExecution": false, "value": null }
      ],
      "outputs": [
        { "name": "Text", "typeName": "System.String", "isInput": false, "isExecution": false, "value": null }
      ]
    },
    {
      "id": "consume",
      "typeId": null,
      "name": "Consume",
      "callable": true,
      "execInit": false,
      "x": 600,
      "y": 300,
      "width": 200,
      "height": 60,
      "inputs": [
        { "name": "Enter", "typeName": "NodeEditor.Blazor.Services.Execution.ExecutionPath", "isInput": true, "isExecution": true, "value": null },
        { "name": "Value", "typeName": "System.Object", "isInput": true, "isExecution": false, "value": null }
      ],
      "outputs": [
        { "name": "Exit", "typeName": "NodeEditor.Blazor.Services.Execution.ExecutionPath", "isInput": false, "isExecution": true, "value": null }
      ]
    },
    {
      "id": "marker",
      "typeId": null,
      "name": "Marker",
      "callable": true,
      "execInit": false,
      "x": 860,
      "y": 300,
      "width": 180,
      "height": 60,
      "inputs": [
        { "name": "Enter", "typeName": "NodeEditor.Blazor.Services.Execution.ExecutionPath", "isInput": true, "isExecution": true, "value": null }
      ],
      "outputs": [
        { "name": "Exit", "typeName": "NodeEditor.Blazor.Services.Execution.ExecutionPath", "isInput": false, "isExecution": true, "value": null }
      ]
    }
  ],
  "connections": [
    { "outputNodeId": "start", "outputSocketName": "Exit", "inputNodeId": "invoke", "inputSocketName": "Enter", "isExecution": true },
    { "outputNodeId": "invoke", "outputSocketName": "Exit", "inputNodeId": "consume", "inputSocketName": "Enter", "isExecution": true },
    { "outputNodeId": "consume", "outputSocketName": "Exit", "inputNodeId": "marker", "inputSocketName": "Enter", "isExecution": true },

    { "outputNodeId": "api", "outputSocketName": "Client", "inputNodeId": "agent", "inputSocketName": "Client", "isExecution": false },
    { "outputNodeId": "model", "outputSocketName": "Model", "inputNodeId": "agent", "inputSocketName": "Model", "isExecution": false },

    { "outputNodeId": "mcp-fetch", "outputSocketName": "Server", "inputNodeId": "mcp-init", "inputSocketName": "Server", "isExecution": false },
    { "outputNodeId": "mcp-init", "outputSocketName": "ToolsTask", "inputNodeId": "await-tools", "inputSocketName": "ToolsTask", "isExecution": false },
    { "outputNodeId": "await-tools", "outputSocketName": "Tools", "inputNodeId": "add-tools", "inputSocketName": "Tools", "isExecution": false },
    { "outputNodeId": "agent", "outputSocketName": "Agent", "inputNodeId": "add-tools", "inputSocketName": "Agent", "isExecution": false },

    { "outputNodeId": "add-tools", "outputSocketName": "Updated", "inputNodeId": "runnable-a", "inputSocketName": "Agent", "isExecution": false },
    { "outputNodeId": "add-tools", "outputSocketName": "Updated", "inputNodeId": "runnable-b", "inputSocketName": "Agent", "isExecution": false },

    { "outputNodeId": "orchestration", "outputSocketName": "Runtime", "inputNodeId": "runnable-a", "inputSocketName": "Orchestration", "isExecution": false },
    { "outputNodeId": "orchestration", "outputSocketName": "Runtime", "inputNodeId": "runnable-b", "inputSocketName": "Orchestration", "isExecution": false },

    { "outputNodeId": "runnable-a", "outputSocketName": "Runnable", "inputNodeId": "set-entry", "inputSocketName": "Runnable", "isExecution": false },
    { "outputNodeId": "orchestration", "outputSocketName": "Runtime", "inputNodeId": "set-entry", "inputSocketName": "Orchestration", "isExecution": false },

    { "outputNodeId": "set-entry", "outputSocketName": "Updated", "inputNodeId": "set-result", "inputSocketName": "Orchestration", "isExecution": false },
    { "outputNodeId": "runnable-b", "outputSocketName": "Runnable", "inputNodeId": "set-result", "inputSocketName": "Runnable", "isExecution": false },

    { "outputNodeId": "set-result", "outputSocketName": "Updated", "inputNodeId": "invoke", "inputSocketName": "Orchestration", "isExecution": false },
    { "outputNodeId": "user-message", "outputSocketName": "Message", "inputNodeId": "invoke", "inputSocketName": "Input", "isExecution": false },

    { "outputNodeId": "runnable-a", "outputSocketName": "Runnable", "inputNodeId": "advancer", "inputSocketName": "From", "isExecution": false },
    { "outputNodeId": "runnable-b", "outputSocketName": "Runnable", "inputNodeId": "advancer", "inputSocketName": "To", "isExecution": false },

    { "outputNodeId": "invoke", "outputSocketName": "ResultTask", "inputNodeId": "await-message", "inputSocketName": "MessageTask", "isExecution": false },
    { "outputNodeId": "await-message", "outputSocketName": "Message", "inputNodeId": "message-to-text", "inputSocketName": "Message", "isExecution": false },
    { "outputNodeId": "message-to-text", "outputSocketName": "Text", "inputNodeId": "consume", "inputSocketName": "Value", "isExecution": false }
  ],
  "viewport": {
    "x": 0,
    "y": 0,
    "width": 1600,
    "height": 900,
    "zoom": 1
  },
  "selectedNodeIds": []
}
